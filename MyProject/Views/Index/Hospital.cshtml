<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Google Map API 3 - 01</title>
    <style type="text/css">
        html {
            height: 100%
        }

        body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: tahoma, "Microsoft Sans Serif", sans-serif, Verdana;
            font-size: 12px;
        }
        /* css ¡ÓË¹´¤ÇÒÁ¡ÇéÒ§ ¤ÇÒÁÊÙ§¢Í§á¼¹·Õè */
        #map_canvas {
            width: 550px;
            height: 400px;
            margin: auto;
            margin-top: 50px;
        }
    </style>


</head>

<body>
    <div id="map_canvas"></div>
    <div id="showDD" style="margin:auto;padding-top:5px;width:550px;">
        <!--textbox ¡ÃÍ¡ª×èÍÊ¶Ò¹·Õè áÅÐ»ØèÁÊÓËÃÑº¡ÒÃ¤é¹ËÒ àÍÒäÇé¹Í¡á·ç¡ <form>-->
        Search Place
        <input name="namePlace" type="text" id="namePlace" size="40" />
        <input type="button" name="SearchPlace" id="SearchPlace" value="Search" />
        <hr />
        <!--  <form> à¡çº¢éÍÁÙÅÊÓËÃÑº¹Óä»ºÑ¹·Ö¡Å§°Ò¹¢éÍÁÙÅ ËÃ×Í¹Óä»ãªéÍ×è¹æ-->
        <form id="form_get_detailMap" name="form_get_detailMap" method="post" action="">
            Latitude
            <input name="lat_value" type="text" id="lat_value" value="0" size="17" />
            Longitude
            <input name="lon_value" type="text" id="lon_value" value="0" size="17" />
            Zoom
            <input name="zoom_value" type="text" id="zoom_value" value="0" size="5" />
            <input type="submit" name="button" id="button" value="ºÑ¹·Ö¡" />
        </form>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        var geocoder; // ¡ÓË¹´µÑÇá»ÃÊÓËÃÑº à¡çº Geocoder Object ãªéá»Å§ª×èÍÊ¶Ò¹·Õèà»ç¹¾Ô¡Ñ´
        var map; // ¡ÓË¹´µÑÇá»Ã map äÇé´éÒ¹¹Í¡¿Ñ§¡ìªÑ¹ à¾×èÍãËéÊÒÁÒÃ¶àÃÕÂ¡ãªé§Ò¹ ¨Ò¡ÊèÇ¹Í×è¹ä´é
        var my_Marker; // ¡ÓË¹´µÑÇá»ÃÊÓËÃÑºà¡çºµÑÇ marker
        var GGM; // ¡ÓË¹´µÑÇá»Ã GGM äÇéà¡çº google.maps Object ¨Ðä´éàÃÕÂ¡ãªé§Ò¹ä´é§èÒÂ¢Öé¹
        function initialize() { // ¿Ñ§¡ìªÑ¹áÊ´§á¼¹·Õè
            GGM = new Object(google.maps); // à¡çºµÑÇá»Ã google.maps Object äÇéã¹µÑÇá»Ã GGM
            geocoder = new GGM.Geocoder(); // à¡çºµÑÇá»Ã google.maps.Geocoder Object
            // ¡ÓË¹´¨Ø´àÃÔèÁµé¹¢Í§á¼¹·Õè
            var my_Latlng = new GGM.LatLng(13.87041167703449, 100.5515666216774);
            var my_mapTypeId = GGM.MapTypeId.ROADMAP; // ¡ÓË¹´ÃÙ»áººá¼¹·Õè·ÕèáÊ´§
            // ¡ÓË¹´ DOM object ·Õè¨ÐàÍÒá¼¹·Õèä»áÊ´§ ·Õè¹Õé¤×Í div id=map_canvas
            var my_DivObj = $("#map_canvas")[0];
            // ¡ÓË¹´ Option ¢Í§á¼¹·Õè
            var myOptions = {
                zoom: 15, // ¡ÓË¹´¢¹Ò´¡ÒÃ zoom
                center: my_Latlng, // ¡ÓË¹´¨Ø´¡Öè§¡ÅÒ§ ¨Ò¡µÑÇá»Ã my_Latlng
                mapTypeId: my_mapTypeId // ¡ÓË¹´ÃÙ»áººá¼¹·Õè ¨Ò¡µÑÇá»Ã my_mapTypeId
            };
            map = new GGM.Map(my_DivObj, myOptions); // ÊÃéÒ§á¼¹·ÕèáÅÐà¡çºµÑÇá»ÃäÇéã¹ª×èÍ map

            my_Marker = new GGM.Marker({ // ÊÃéÒ§µÑÇ marker äÇéã¹µÑÇá»Ã my_Marker
                position: my_Latlng,  // ¡ÓË¹´äÇé·Õèà´ÕÂÇ¡Ñº¨Ø´¡Öè§¡ÅÒ§
                map: map, // ¡ÓË¹´ÇèÒ marker ¹Õéãªé¡Ñºá¼¹·Õèª×èÍ instance ÇèÒ map
                draggable: true, // ¡ÓË¹´ãËéÊÒÁÒÃ¶ÅÒ¡µÑÇ marker ¹Õéä´é
                title: "¤ÅÔ¡ÅÒ¡à¾×èÍËÒµÓáË¹è§¨Ø´·ÕèµéÍ§¡ÒÃ!" // áÊ´§ title àÁ×èÍàÍÒàÁÒÊìÁÒÍÂÙèàË¹×Í
            });


            // ¡ÓË¹´ event ãËé¡ÑºµÑÇ marker àÁ×èÍÊÔé¹ÊØ´¡ÒÃÅÒ¡µÑÇ marker ãËé·Ó§Ò¹ÍÐäÃ
            GGM.event.addListener(my_Marker, 'dragend', function () {
                var my_Point = my_Marker.getPosition();  // ËÒµÓáË¹è§¢Í§µÑÇ marker àÁ×èÍ¡´ÅÒ¡áÅéÇ»ÅèÍÂ
                map.panTo(my_Point); // ãËéá¼¹·ÕèáÊ´§ä»·ÕèµÑÇ marker
                $("#lat_value").val(my_Point.lat());  // àÍÒ¤èÒ latitude µÑÇ marker áÊ´§ã¹ textbox id=lat_value
                $("#lon_value").val(my_Point.lng());  // àÍÒ¤èÒ longitude µÑÇ marker áÊ´§ã¹ textbox id=lon_value
                $("#zoom_value").val(map.getZoom());  // àÍÒ¢¹Ò´ zoom ¢Í§á¼¹·ÕèáÊ´§ã¹ textbox id=zoom_valu
            });

            // ¡ÓË¹´ event ãËé¡ÑºµÑÇá¼¹·Õè àÁ×èÍÁÕ¡ÒÃà»ÅÕèÂ¹á»Å§¡ÒÃ zoom
            GGM.event.addListener(map, 'zoom_changed', function () {
                $("#zoom_value").val(map.getZoom());   // àÍÒ¢¹Ò´ zoom ¢Í§á¼¹·ÕèáÊ´§ã¹ textbox id=zoom_value
            });

        }
        $(function () {
            // ÊèÇ¹¢Í§¿Ñ§¡ìªÑ¹¤é¹ËÒª×èÍÊ¶Ò¹·Õèã¹á¼¹·Õè
            var searchPlace = function () { // ¿Ñ§¡ìªÑ¹ ÊÓËÃÑº¤Ñ¹ËÒÊ¶Ò¹·Õè ª×èÍ searchPlace
                var AddressSearch = $("#namePlace").val();// àÍÒ¤èÒ¨Ò¡ textbox ·Õè¡ÃÍ¡ÁÒäÇéã¹µÑÇá»Ã
                if (geocoder) { // µÃÇ¨ÊÍºÇèÒ¶éÒÁÕ Geocoder Object
                    geocoder.geocode({
                        address: AddressSearch // ãËéÊè§ª×èÍÊ¶Ò¹·Õèä»¤é¹ËÒ
                    }, function (results, status) { // Êè§¡ÅÑº¡ÒÃ¤é¹ËÒà»ç¹¼ÅÅÑ¾¸ì áÅÐÊ¶Ò¹Ð
                        if (status == GGM.GeocoderStatus.OK) { // µÃÇ¨ÊÍºÊ¶Ò¹Ð ¶éÒËÒ¡à¨Í
                            var my_Point = results[0].geometry.location; // àÍÒ¼ÅÅÑ¾¸ì¢Í§¾Ô¡Ñ´ ÁÒà¡çºäÇé·ÕèµÑÇá»Ã
                            map.setCenter(my_Point); // ¡ÓË¹´¨Ø´¡ÅÒ§¢Í§á¼¹·Õèä»·Õè ¾Ô¡Ñ´¼ÅÅÑ¾¸ì
                            my_Marker.setMap(map); // ¡ÓË¹´µÑÇ marker ãËéãªé¡Ñºá¼¹·Õèª×èÍ map
                            my_Marker.setPosition(my_Point); // ¡ÓË¹´µÓáË¹è§¢Í§µÑÇ marker à·èÒ¡Ñº ¾Ô¡Ñ´¼ÅÅÑ¾¸ì
                            $("#lat_value").val(my_Point.lat());  // àÍÒ¤èÒ latitude ¾Ô¡Ñ´¼ÅÅÑ¾¸ì áÊ´§ã¹ textbox id=lat_value
                            $("#lon_value").val(my_Point.lng());  // àÍÒ¤èÒ longitude ¾Ô¡Ñ´¼ÅÅÑ¾¸ì áÊ´§ã¹ textbox id=lon_value
                            $("#zoom_value").val(map.getZoom()); // àÍÒ¢¹Ò´ zoom ¢Í§á¼¹·ÕèáÊ´§ã¹ textbox id=zoom_valu
                        } else {
                            // ¤é¹ËÒäÁè¾ºáÊ´§¢éÍ¤ÇÒÁá¨é§
                            alert("Geocode was not successful for the following reason: " + status);
                            $("#namePlace").val("");// ¡ÓË¹´¤èÒ textbox id=namePlace ãËéÇèÒ§ÊÓËÃÑº¤é¹ËÒãËÁè
                        }
                    });
                }
            }
            $("#SearchPlace").click(function () { // àÁ×èÍ¤ÅÔ¡·Õè»ØèÁ id=SearchPlace ãËé·Ó§Ò¹¿Ñ§¡ì£Ñ¹¤é¹ËÒÊ¶Ò¹·Õè
                searchPlace();  // ¿Ñ§¡ì£Ñ¹¤é¹ËÒÊ¶Ò¹·Õè
            });
            $("#namePlace").keyup(function (event) { // àÁ×èÍ¾ÔÁ¾ì¤Ó¤é¹ËÒã¹¡ÅèÍ§¤é¹ËÒ
                if (event.keyCode == 13) {  //  µÃÇ¨ÊÍº»ØèÁ¶éÒ¡´ ¶éÒà»ç¹»ØèÁ Enter ãËéàÃÕÂ¡¿Ñ§¡ìªÑ¹¤é¹ËÒÊ¶Ò¹·Õè
                    searchPlace();      // ¿Ñ§¡ì£Ñ¹¤é¹ËÒÊ¶Ò¹·Õè
                }
            });

        });
        $(function () {
            // âËÅ´ Ê¤ÃÔ» google map api àÁ×èÍàÇçºâËÅ´àÃÕÂºÃéÍÂáÅéÇ
            // ¤èÒµÑÇá»Ã ·ÕèÊè§ä»ã¹ä¿Åì google map api
            // v=3.2&sensor=false&language=th&callback=initialize
            //  v àÇÍÃìªÑ¹è 3.2
            //  sensor ¡ÓË¹´ãËéÊÒÁÒÃ¶áÊ´§µÓáË¹è§·Óà»Ô´á¼¹·ÕèÍÂÙèä´é àËÁÒÐÊÓËÃÑºÁ×Í¶×Í »¡µÔãªé false
            //  language ÀÒÉÒ th ,en à»ç¹µé¹
            //  callback ãËéàÃÕÂ¡ãªé¿Ñ§¡ìªÑ¹áÊ´§ á¼¹·Õè initialize
            $("<script/>", {
                "type": "text/javascript",
                src: "//maps.google.com/maps/api/js?key=AIzaSyASIZUIuQiRYi7HErx7ZrZmuiKSkRa0HVw&language=th&region=TH&v=3.2&sensor=false&callback=initialize"
            }).appendTo("body");
        });
    </script>
</body>
</html>